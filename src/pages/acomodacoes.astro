---
type AccommodationDTO = {
  id: number;
  created_at: string;
  name: string;
  total_guests: number;
  single_beds: number;
  double_beds: number;
  status: string;
  min_nights: number;
  amenities: Array<string>;
};
import Table from "../components/Table.astro";
import Layout from "../layouts/Layout.astro";
const response = await fetch("http://127.0.0.1:5000/api/acomodacoes");
const data: Array<AccommodationDTO> = await response.json();
const tableData = data.map((accommodation) => {
  return {
    id: accommodation.id,
    nome: accommodation.name,
    status: accommodation.status,
  };
});
const columns = Object.keys(tableData[0]);
---

<Layout>
  <div class="flex flex-col items-center">
    {
      data && (
        <Table id="accommodation-table" columns={columns} data={tableData} />
      )
    }
    {!data && <p>Nenhum h√≥spede encontrado no banco de dados</p>}

    <button
      class="w-60 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"
      >Cadastrar</button
    >
  </div>
</Layout>
